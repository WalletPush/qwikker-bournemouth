{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\n/**\n * Create a Supabase client with service role privileges\n * This bypasses RLS and should only be used for trusted server-side operations\n */\nexport function createAdminClient() {\n  if (!process.env.SUPABASE_SERVICE_ROLE_KEY) {\n    throw new Error('SUPABASE_SERVICE_ROLE_KEY is required for admin operations')\n  }\n\n  return createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMO,SAAS;IACd,IAAI,CAAC,QAAQ,GAAG,CAAC,yBAAyB,EAAE;QAC1C,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAA,iRAAY,gFAEjB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/lib/integrations.ts"],"sourcesContent":["// Integration utilities for external services\n\n/**\n * Upload file to Cloudinary\n */\nexport async function uploadToCloudinary(file: File, folder = \"qwikker_uploads\"): Promise<string> {\n  const url = `https://api.cloudinary.com/v1_1/dsh32kke7/${file.type.startsWith('image') ? 'image' : 'raw'}/upload`\n\n  const formData = new FormData()\n  formData.append('file', file)\n  formData.append('upload_preset', 'unsigned_qwikker') // This preset must be created in Cloudinary\n  formData.append('folder', folder)\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: formData\n  })\n\n  if (!response.ok) {\n    throw new Error(`Cloudinary upload failed: ${response.statusText}`)\n  }\n\n  const data = await response.json()\n  return data.secure_url\n}\n\n/**\n * Send data to GoHighLevel webhook\n */\nexport async function sendToGoHighLevel(formData: any): Promise<void> {\n  const webhookUrl = \"https://services.leadconnectorhq.com/hooks/IkBldqzvQG4XkoSxkCq8/webhook-trigger/582275ed-27fe-4374-808b-9f8403f820e3\"\n  \n  const response = await fetch(webhookUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(formData)\n  })\n\n  if (!response.ok) {\n    throw new Error(`GoHighLevel webhook failed: ${response.statusText}`)\n  }\n}\n\n/**\n * Send file update to GoHighLevel using a separate webhook that doesn't trigger signup notifications\n * This function updates contact info only, without triggering new signup workflows\n * \n * TO ENABLE: Set NEXT_PUBLIC_GHL_UPDATE_WEBHOOK_URL in your environment variables\n * with a separate GHL webhook that doesn't send Slack notifications\n */\nexport async function sendFileUpdateToGoHighLevel(formData: any): Promise<void> {\n  // Use a separate webhook URL for updates to avoid signup notifications\n  const updateWebhookUrl = process.env.NEXT_PUBLIC_GHL_UPDATE_WEBHOOK_URL\n  \n  if (!updateWebhookUrl) {\n    console.warn('GHL update webhook not configured - file updates will not sync to GHL')\n    console.warn('To enable GHL sync for file updates, set NEXT_PUBLIC_GHL_UPDATE_WEBHOOK_URL')\n    return\n  }\n  \n  // Add metadata to distinguish this from new signups\n  const updateData = {\n    ...formData,\n    isFileUpdate: true,\n    updateType: 'file_upload',\n    skipSignupNotification: true,\n    // This flag can be used in GHL to filter out signup notifications\n  }\n  \n  const response = await fetch(updateWebhookUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(updateData)\n  })\n\n  if (!response.ok) {\n    throw new Error(`GoHighLevel file update webhook failed: ${response.statusText}`)\n  }\n}\n\n/**\n * Send Slack notification\n */\nexport async function sendSlackNotification(formData: any): Promise<void> {\n  // You'll need to set up a Slack webhook URL in your environment variables\n  const slackWebhookUrl = process.env.NEXT_PUBLIC_SLACK_WEBHOOK_URL\n  \n  if (!slackWebhookUrl) {\n    console.warn('Slack webhook URL not configured')\n    return\n  }\n\n  const message = {\n    text: \"üéâ New QWIKKER Business Signup!\",\n    blocks: [\n      {\n        type: \"header\",\n        text: {\n          type: \"plain_text\",\n          text: \"üéâ New Business Registration\"\n        }\n      },\n      {\n        type: \"section\",\n        fields: [\n          {\n            type: \"mrkdwn\",\n            text: `*Business:* ${formData.businessName || 'Not provided'}`\n          },\n          {\n            type: \"mrkdwn\", \n            text: `*Owner:* ${formData.firstName} ${formData.lastName}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Email:* ${formData.email}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Phone:* ${formData.phone || 'Not provided'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Location:* ${formData.town}, ${formData.postcode}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Type:* ${formData.businessType || 'Not specified'}`\n          }\n        ]\n      },\n      {\n        type: \"section\",\n        fields: [\n          {\n            type: \"mrkdwn\",\n            text: `*Logo Uploaded:* ${formData.logo_url ? '‚úÖ Yes' : '‚ùå No'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Menu Uploaded:* ${formData.menuservice_url ? '‚úÖ Yes' : '‚ùå No'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Offer Created:* ${formData.offerName ? '‚úÖ Yes' : '‚ùå No'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Referral Source:* ${formData.referralSource || 'Not specified'}`\n          }\n        ]\n      }\n    ]\n  }\n\n  const response = await fetch(slackWebhookUrl, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(message)\n  })\n\n  if (!response.ok) {\n    throw new Error(`Slack notification failed: ${response.statusText}`)\n  }\n}\n\n/**\n * Send Slack notification for important business updates\n */\nexport async function sendBusinessUpdateNotification(profileData: any, updateType: 'file_upload' | 'secret_menu' | 'offer_created' | 'business_info' | 'offer_deleted' | 'secret_menu_deleted' | 'referral_signup' | 'referral_credited', details: any): Promise<void> {\n  const slackWebhookUrl = process.env.NEXT_PUBLIC_SLACK_WEBHOOK_URL\n  \n  if (!slackWebhookUrl) {\n    console.warn('Slack webhook URL not configured')\n    return\n  }\n\n  const businessName = profileData.business_name || 'Unknown Business'\n  const ownerName = `${profileData.first_name || ''} ${profileData.last_name || ''}`.trim() || 'Unknown Owner'\n\n  let message: any\n\n  switch (updateType) {\n    case 'file_upload':\n      message = createFileUploadMessage(businessName, ownerName, details.fileType, details.fileUrl)\n      break\n    case 'secret_menu':\n      message = createSecretMenuMessage(businessName, ownerName, details)\n      break\n    case 'offer_created':\n      message = createOfferMessage(businessName, ownerName, details)\n      break\n    case 'business_info':\n      message = createBusinessInfoMessage(businessName, ownerName, details)\n      break\n    case 'offer_deleted':\n      message = createOfferDeleteMessage(businessName, ownerName, details)\n      break\n    case 'secret_menu_deleted':\n      message = createSecretMenuDeleteMessage(businessName, ownerName, details)\n      break\n    case 'referral_signup':\n      message = createReferralSignupMessage(businessName, ownerName, details)\n      break\n    case 'referral_credited':\n      message = createReferralCreditedMessage(businessName, ownerName, details)\n      break\n    default:\n      return // Skip unknown update types\n  }\n\n  // Add channel and thread targeting\n  const payload = {\n    ...message,\n    channel: \"#business-file-management\", // Specific channel\n    username: \"QWIKKER Bot\",\n    icon_emoji: \":file_folder:\",\n    // thread_ts can be added here if you want to use threads\n  }\n\n  const response = await fetch(slackWebhookUrl, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  })\n\n  if (!response.ok) {\n    throw new Error(`Slack business update notification failed: ${response.statusText}`)\n  }\n}\n\nfunction createFileUploadMessage(businessName: string, ownerName: string, fileType: 'logo' | 'menu' | 'offer', fileUrl: string) {\n  const actions = {\n    logo: `${ownerName} (${businessName}) uploaded a new business logo`,\n    menu: `${ownerName} (${businessName}) uploaded a new menu/price list`, \n    offer: `${ownerName} (${businessName}) uploaded a new offer image`\n  }\n\n  const emojis = {\n    logo: 'üè¢',\n    menu: 'üìã', \n    offer: 'üéØ'\n  }\n\n  return {\n    text: actions[fileType],\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `${emojis[fileType]} ${actions[fileType]}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `<${fileUrl}|View File> ‚Ä¢ Knowledge base may need updating`\n        }\n      }\n    ]\n  }\n}\n\nfunction createSecretMenuMessage(businessName: string, ownerName: string, details: any) {\n  return {\n    text: `${ownerName} (${businessName}) added a secret menu item`,\n    blocks: [\n      {\n        type: \"section\", \n        text: {\n          type: \"mrkdwn\",\n          text: `ü§´ ${ownerName} (${businessName}) added a secret menu item: *${details.itemName}*`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `${details.description ? `_\"${details.description}\"_` : ''} ‚Ä¢ Knowledge base update recommended`\n        }\n      }\n    ]\n  }\n}\n\nfunction createOfferMessage(businessName: string, ownerName: string, details: any) {\n  const formatDate = (dateStr: string | null) => {\n    if (!dateStr) return 'Not specified'\n    return new Date(dateStr).toLocaleDateString('en-GB')\n  }\n\n  const claimAmountLabel = details.offerClaimAmount === 'single' ? 'Single Use' : \n                          details.offerClaimAmount === 'multiple' ? 'Multiple Use' : \n                          'Not specified'\n\n  const offerImage = details.offerImage ? \n    `\\n*Offer Image:* <${details.offerImage}|View Image>` : \n    '\\n*Offer Image:* Will be designed by QWIKKER team'\n\n  return {\n    text: `${ownerName} (${businessName}) created a new offer: ${details.offerName}`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `üéØ ${ownerName} (${businessName}) created a new offer: *${details.offerName}*`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Value:* ${details.offerValue || 'Not specified'}\\n*Type:* ${details.offerType || 'Not specified'}\\n*Claim Amount:* ${claimAmountLabel}\\n*Start Date:* ${formatDate(details.offerStartDate)}\\n*End Date:* ${formatDate(details.offerEndDate)}${offerImage}`\n        }\n      },\n      ...(details.offerTerms ? [{\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Terms & Conditions:*\\n${details.offerTerms}`\n        }\n      }] : []),\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `Knowledge base update recommended`\n        }\n      }\n    ]\n  }\n}\n\nfunction createBusinessInfoMessage(businessName: string, ownerName: string, details: any) {\n  const importantFields = details.updatedFields.filter((field: string) => \n    !['phone', 'email', 'first_name', 'last_name'].includes(field)\n  )\n  \n  if (importantFields.length === 0) {\n    return null // Skip routine contact updates\n  }\n\n  return {\n    text: `${ownerName} (${businessName}) updated business information`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `üìù ${ownerName} (${businessName}) updated: ${importantFields.join(', ')}`\n        }\n      },\n      {\n        type: \"section\", \n        text: {\n          type: \"mrkdwn\",\n          text: `Knowledge base may need updating`\n        }\n      }\n    ]\n  }\n}\n\nfunction createOfferDeleteMessage(businessName: string, ownerName: string, details: any) {\n  return {\n    text: `${ownerName} (${businessName}) deleted an offer: ${details.offerName}`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `üóëÔ∏è ${ownerName} (${businessName}) deleted offer: *${details.offerName}*`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Previous Value:* ${details.offerValue || 'Not specified'}\\n*Previous Type:* ${details.offerType || 'Not specified'}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `Knowledge base update recommended - offer no longer available`\n        }\n      }\n    ]\n  }\n}\n\nfunction createSecretMenuDeleteMessage(businessName: string, ownerName: string, details: any) {\n  return {\n    text: `${ownerName} (${businessName}) removed secret menu item: ${details.itemName}`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `üóëÔ∏è ${ownerName} (${businessName}) removed secret menu item: *${details.itemName}*`\n        }\n      },\n      ...(details.description ? [{\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Previous Description:* ${details.description}`\n        }\n      }] : []),\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `Knowledge base update recommended - item no longer available`\n        }\n      }\n    ]\n  }\n}\n\nfunction createReferralSignupMessage(businessName: string, ownerName: string, details: any) {\n  return {\n    text: `${ownerName} (${businessName}) referred a new business: ${details.referredBusinessName}`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `üéâ ${ownerName} (${businessName}) referred a new business!`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*New Business:* ${details.referredBusinessName}\\n*Owner:* ${details.referredOwnerName}\\n*Referral Code:* ${details.referralCode}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `Potential ¬£10 reward pending business activation ‚Ä¢ Monitor for conversion`\n        }\n      }\n    ]\n  }\n}\n\nfunction createReferralCreditedMessage(businessName: string, ownerName: string, details: any) {\n  return {\n    text: `${ownerName} (${businessName}) earned referral reward for ${details.referredBusinessName}`,\n    blocks: [\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\", \n          text: `üí∞ Referral reward credited to ${ownerName} (${businessName})`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Referred Business:* ${details.referredBusinessName}\\n*Reward Amount:* ${details.currency === 'GBP' ? '¬£' : '$'}${details.rewardAmount}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `Successful referral conversion ‚Ä¢ Reward processed`\n        }\n      }\n    ]\n  }\n}\n\n/**\n * Legacy function - use sendBusinessUpdateNotification instead\n * @deprecated\n */\nexport async function sendProfileUpdateSlackNotification(profileData: any, updatedFields: string[]): Promise<void> {\n  // Redirect to new notification system\n  return sendBusinessUpdateNotification(profileData, 'business_info', { updatedFields })\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/lib/actions/signup-actions.ts"],"sourcesContent":["'use server'\n\nimport { createAdminClient } from '@/lib/supabase/admin'\nimport { uploadToCloudinary } from '@/lib/integrations'\n// import { sendWelcomeEmail } from '@/lib/email/send-welcome-email' // Disabled until domain verification\n\ninterface SignupData {\n  // Personal info\n  firstName: string\n  lastName: string\n  email: string\n  phone: string\n  password: string\n  \n  // Business info\n  businessName: string\n  businessType: string\n  businessCategory: string\n  businessAddress: string\n  town: string\n  postcode: string\n  \n  // Optional fields\n  website?: string\n  instagram?: string\n  facebook?: string\n  \n  // Offer data\n  offerName?: string\n  offerType?: string\n  offerValue?: string\n  claimAmount?: string\n  startDate?: string\n  endDate?: string\n  terms?: string\n  \n  // Other\n  referralSource?: string\n  notes?: string\n}\n\nexport async function createUserAndProfile(formData: SignupData, files: { logo?: File, menu?: File[], offer?: File }, referralCode?: string) {\n  const supabaseAdmin = createAdminClient()\n  \n  try {\n    // 1. Create user in auth.users using admin client\n    const { data: authData, error: authError } = await supabaseAdmin.auth.admin.createUser({\n      email: formData.email,\n      password: formData.password,\n      email_confirm: true, // Auto-confirm email so users can login immediately\n      user_metadata: {\n        first_name: formData.firstName,\n        last_name: formData.lastName,\n      }\n    })\n\n    if (authError || !authData.user) {\n      console.error('Auth user creation failed:', authError)\n      throw new Error(`Account creation failed: ${authError?.message || 'Unknown error'}`)\n    }\n\n    console.log('Auth user created:', authData.user.id)\n\n    // 2. Upload files to Cloudinary\n    let logoUrl = ''\n    let menuUrls: string[] = []\n    let offerImageUrl = ''\n\n    if (files.logo) {\n      logoUrl = await uploadToCloudinary(files.logo, 'qwikker/logos')\n    }\n    \n    if (files.menu && files.menu.length > 0) {\n      menuUrls = await Promise.all(\n        files.menu.map(file => uploadToCloudinary(file, 'qwikker/menus'))\n      )\n    }\n    \n    if (files.offer) {\n      offerImageUrl = await uploadToCloudinary(files.offer, 'qwikker/offers')\n    }\n\n    // 3. Prepare profile data\n    const normalizePhoneNumber = (phone: string): string => {\n      const cleaned = phone.trim()\n      if (cleaned.startsWith('0')) {\n        return '+44' + cleaned.slice(1)\n      }\n      return cleaned\n    }\n\n    const mapReferralSource = (source: string) => {\n      if (!source) return null\n      const mapping: Record<string, string> = {\n        'founding-member': 'partner_referral',\n        'business-referral': 'partner_referral', \n        'google-search': 'google_search',\n        'social-media': 'social_media',\n        'word-of-mouth': 'word_of_mouth',\n        'other': 'other'\n      }\n      return mapping[source] || 'other'\n    }\n\n    const mapGoals = (goals: string) => {\n      if (!goals || goals.trim() === '') return null\n      \n      // Map common phrases to database values\n      const lowerGoals = goals.toLowerCase()\n      if (lowerGoals.includes('customer') && (lowerGoals.includes('new') || lowerGoals.includes('more') || lowerGoals.includes('attract'))) {\n        return 'increase_customers'\n      }\n      if (lowerGoals.includes('marketing') || lowerGoals.includes('advertis') || lowerGoals.includes('promot')) {\n        return 'improve_marketing'\n      }\n      if (lowerGoals.includes('sales') || lowerGoals.includes('revenue') || lowerGoals.includes('income')) {\n        return 'boost_sales'\n      }\n      if (lowerGoals.includes('brand') || lowerGoals.includes('awareness') || lowerGoals.includes('recognition')) {\n        return 'build_brand_awareness'\n      }\n      if (lowerGoals.includes('retention') || lowerGoals.includes('keep') || lowerGoals.includes('loyal')) {\n        return 'customer_retention'\n      }\n      if (lowerGoals.includes('expand') || lowerGoals.includes('grow') || lowerGoals.includes('bigger')) {\n        return 'expand_business'\n      }\n      \n      // Default to 'other' for anything that doesn't match\n      return 'other'\n    }\n\n    const mapBusinessType = (type: string) => {\n      const mapping: Record<string, string> = {\n        'Restaurant': 'restaurant',\n        'Cafe/Coffee Shop': 'cafe',\n        'Bar/Pub': 'bar',\n        'Dessert/Ice Cream': 'restaurant', // closest match\n        'Takeaway/Street Food': 'restaurant',\n        'Salon/Spa': 'salon',\n        'Hairdresser/Barber': 'salon',\n        'Tattoo/Piercing': 'salon',\n        'Clothing/Fashion': 'retail_shop',\n        'Gift Shop': 'retail_shop',\n        'Fitness/Gym': 'gym',\n        'Sports/Outdoors': 'gym',\n        'Hotel/BnB': 'hotel',\n        'Venue/Event Space': 'hotel',\n        'Entertainment/Attractions': 'other',\n        'Professional Services': 'service_business',\n        'Other': 'other'\n      }\n      return mapping[type] || 'other'\n    }\n\n    const mapBusinessTown = (town: string) => {\n      const cleanTown = town.toLowerCase().trim()\n      const mapping: Record<string, string> = {\n        'bournemouth': 'bournemouth',\n        'poole': 'poole', \n        'christchurch': 'christchurch',\n        'wimborne': 'wimborne',\n        'ferndown': 'ferndown',\n        'ringwood': 'ringwood',\n        'new milton': 'new_milton',\n        'newmilton': 'new_milton'\n      }\n      return mapping[cleanTown] || 'other'\n    }\n\n    const mapOfferType = (type: string) => {\n      if (!type) return null\n      const mapping: Record<string, string> = {\n        'percentage': 'percentage_off',\n        'fixed': 'fixed_amount_off',\n        'bogo': 'two_for_one',\n        'free-item': 'freebie',\n        'bundle': 'other',\n        'other': 'other'\n      }\n      return mapping[type] || 'other'\n    }\n\n    const mapClaimAmount = (amount: string) => {\n      if (!amount) return null\n      const mapping: Record<string, string> = {\n        'first_10': 'first_10',\n        'first_25': 'first_25', \n        'first_50': 'first_50',\n        'first_100': 'first_100',\n        'unlimited': 'unlimited',\n        'custom': 'custom'\n      }\n      return mapping[amount] || 'unlimited'\n    }\n\n    const profileData = {\n      user_id: authData.user.id,\n      first_name: formData.firstName,\n      last_name: formData.lastName,\n      email: formData.email,\n      phone: normalizePhoneNumber(formData.phone),\n      business_name: formData.businessName,\n      business_type: mapBusinessType(formData.businessType),\n      business_category: formData.businessCategory,\n      business_address: formData.businessAddress,\n      business_town: mapBusinessTown(formData.town),\n      business_postcode: formData.postcode,\n      website_url: formData.website || null,\n      instagram_handle: formData.instagram || null,\n      facebook_url: formData.facebook || null,\n      logo: logoUrl || null,\n      offer_name: formData.offerName || null,\n      offer_type: mapOfferType(formData.offerType || ''),\n      offer_value: formData.offerValue || null,\n      offer_claim_amount: mapClaimAmount(formData.claimAmount || ''),\n      offer_start_date: formData.startDate || null,\n      offer_end_date: formData.endDate || null,\n      offer_terms: formData.terms || null,\n      offer_image: offerImageUrl || null,\n      referral_source: mapReferralSource(formData.referralSource || ''),\n      goals: mapGoals(formData.goals || ''),\n      notes: formData.notes || null,\n      plan: 'featured', // Free trial users get Featured plan access during 120-day trial\n      is_founder: new Date() < new Date('2025-12-31'),\n    }\n\n    // 4. Create profile\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('profiles')\n      .insert(profileData)\n      .select()\n      .single()\n\n    if (profileError) {\n      console.error('Profile creation failed:', profileError)\n      throw new Error(`Profile creation failed: ${profileError.message}`)\n    }\n\n    console.log('Profile created:', profile.id)\n\n    // 5. Track referral if provided\n    if (referralCode) {\n      try {\n        const { trackReferral } = await import('@/lib/actions/referral-actions')\n        await trackReferral(referralCode, authData.user.id)\n      } catch (error) {\n        console.error('Referral tracking failed (non-critical):', error)\n      }\n    }\n\n           // Send welcome email (disabled until domain verification)\n           // sendWelcomeEmail({\n           //   firstName: formData.firstName,\n           //   lastName: formData.lastName,\n           //   email: formData.email,\n           //   businessName: formData.businessName,\n           //   profile: profile\n           // }).catch(error => {\n           //   console.error('Welcome email failed (non-blocking):', error)\n           // })\n    \n    return {\n      success: true,\n      user: authData.user,\n      profile: profile\n    }\n\n  } catch (error) {\n    console.error('Signup process failed:', error)\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    }\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/.next-internal/server/app/onboarding/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createUserAndProfile as '701a993caf5c2806946ebbf615842dcce85c5ee892'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 764, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/components/founding-member-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FoundingMemberForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call FoundingMemberForm() from the server but FoundingMemberForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/founding-member-form.tsx <module evaluation>\",\n    \"FoundingMemberForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,qBAAqB,IAAA,uYAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,qEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/components/founding-member-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FoundingMemberForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call FoundingMemberForm() from the server but FoundingMemberForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/founding-member-form.tsx\",\n    \"FoundingMemberForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,qBAAqB,IAAA,uYAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,iDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":["file:///Users/qwikker/qwikkerdashboard/app/onboarding/page.tsx"],"sourcesContent":["import { FoundingMemberForm } from '@/components/founding-member-form'\n\ninterface OnboardingPageProps {\n  searchParams: Promise<{ ref?: string }>\n}\n\nexport default async function OnboardingPage({ searchParams }: OnboardingPageProps) {\n  const params = await searchParams\n  const referralCode = params.ref || null\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 text-white dark:bg-slate-950 dark:text-white\">\n      <div className=\"container mx-auto max-w-4xl px-4 py-8\">\n        <FoundingMemberForm referralCode={referralCode} />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAMe,eAAe,eAAe,EAAE,YAAY,EAAuB;IAChF,MAAM,SAAS,MAAM;IACrB,MAAM,eAAe,OAAO,GAAG,IAAI;IAEnC,qBACE,6WAAC;QAAI,WAAU;kBACb,cAAA,6WAAC;YAAI,WAAU;sBACb,cAAA,6WAAC,+JAAkB;gBAAC,cAAc;;;;;;;;;;;;;;;;AAI1C","debugId":null}}]
}